<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Paws in Peace Memorial ‚Äî Demo</title>
  <!-- React & Tailwind CDN for easy demo hosting -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
  <style>
    .glass { background: rgba(255,255,255,0.08); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.15); }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); min-height: 100vh; }
    .animate-float { animation: float 6s ease-in-out infinite; }
    @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }
    .animate-pulse-slow { animation: pulse 4s cubic-bezier(0.4,0,0.6,1) infinite; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useEffect, useCallback } = React;
    const { Heart, Plus, Star, Calendar, Share2, Camera, Crown, Award, Sparkles, ChevronRight, ArrowLeft, Wallet, Info } = lucideReact;

    /** ****************************
     *  SAFETY / CONFIG GUARDS
     *****************************/
    // Public demo should NEVER mint or request approvals.
    const DEMO_MODE = true;              // set to false only in private/prod build
    const ALLOW_MAINNET = false;         // hard-disable mainnet in demo

    /** ****************************
     *  RUNTIME INJECTION HOOKS
     *  (so you can update tokenomics/ABI/addresses without code edits)
     *****************************/
    // In production, inject these via a <script> tag on your private site:
    //   window.__PIP_ABI__ = [...]
    //   window.__PIP_ADDR__ = { '421614': '0x...', '42161': '0x...' }
    //   window.__PIP_TOKENOMICS__ = { ...latest }

    // Fallback demo placeholders:
    const ADDR = (window.__PIP_ADDR__ || {
      '421614': '0xDemoSepolia', // Arbitrum Sepolia TESTNET (demo)
      '42161':  '0xDemoMainnet'  // Arbitrum One MAINNET (disabled in demo)
    });

    const CONTRACT_ABI = (window.__PIP_ABI__ || []); // keep empty in OSS demo

    // Latest tokenomics can be injected; we keep sensible defaults.
    const DEFAULT_TOKENOMICS = {
      totalSupply: '5,000,000,000,000',          // 5T $PIP
      presaleHardCap: '$20,000,000',
      launchPrice: '$0.00004',
      liquidityPool: { tokens: '200B PIP', usdc: '$8M USDC' },
      fundAllocation: {
        liquidity: { percent: 40, amount: '$8M' },
        physicalCenters: { percent: 30, amount: '$6M' },
        marketing: { percent: 14.5, amount: '$2.9M' },
        blockchain: { percent: 11, amount: '$2.2M' },
        security: { percent: 4.5, amount: '$0.9M' }
      },
      distribution: {
        publicPresale: { percent: 10, tokens: '500B' },
        launchLiquidity: { percent: 4, tokens: '200B' },
        marketingTreasury: { percent: 27, tokens: '1.35T' },
        teamAdvisors: { percent: 10, tokens: '500B' },
        stakingRewards: { percent: 49, tokens: '2.45T' }
      },
      profitSharing: '10% of annual net profits distributed to presale holders'
    };
    const TOKENOMICS = Object.assign({}, DEFAULT_TOKENOMICS, window.__PIP_TOKENOMICS__ || {});

    // Minimal chain meta
    const CHAINS = {
      421614: { hex: '0x66eee', label: 'Arbitrum Sepolia (test)' },
      42161:  { hex: '0xa4b1', label: 'Arbitrum One (main)' }
    };

    // Collections styling/icons
    const collectionStyle = (name) => ({
      Founders: { from: 'from-yellow-400', to: 'to-yellow-600', border: 'border-yellow-400/40' },
      Gold:     { from: 'from-yellow-300', to: 'to-yellow-500', border: 'border-yellow-400/40' },
      Silver:   { from: 'from-gray-300',   to: 'to-gray-500',   border: 'border-gray-400/40' },
      Diamond:  { from: 'from-purple-200', to: 'to-purple-400', border: 'border-purple-400/40' },
      Gemini:   { from: 'from-blue-300',   to: 'to-blue-500',   border: 'border-blue-400/40' }
    }[name] || { from: 'from-purple-300', to: 'to-purple-500', border: 'border-purple-400/40' });

    const collectionIcon = (name) => {
      switch (name) {
        case 'Founders': return React.createElement(Crown, { className: 'w-4 h-4 text-yellow-300', 'aria-hidden': true });
        case 'Gold':     return React.createElement(Star, { className: 'w-4 h-4 text-yellow-400', 'aria-hidden': true });
        case 'Silver':   return React.createElement(Award, { className: 'w-4 h-4 text-gray-300', 'aria-hidden': true });
        case 'Diamond':  return React.createElement(Sparkles, { className: 'w-4 h-4 text-purple-300', 'aria-hidden': true });
        case 'Gemini':   return React.createElement(Star, { className: 'w-4 h-4 text-blue-300', 'aria-hidden': true });
        default:         return React.createElement(Award, { className: 'w-4 h-4 text-purple-300', 'aria-hidden': true });
      }
    };

    // Simple ethers shim for demo (no approvals/signing!)
    const ethers = {
      BrowserProvider: class { constructor() {} },
      Contract: class { constructor() {} },
      formatEther: (v) => String(v),
    };

    const PawsInPeaceApp = () => {
      const [currentView, setCurrentView] = useState('home');
      const [selectedPet, setSelectedPet] = useState(null);
      const [favorites, setFavorites] = useState(new Set());
      const [account, setAccount] = useState('');
      const [chainId, setChainId] = useState(421614);
      const [priceEth, setPriceEth] = useState('0.016');
      const [form, setForm] = useState({ petName: '', memorialDate: '', message: '', mediaType: 0, mediaURI: '', visualStyle: 'Founders' });

      // Demo content
      const memorialTokens = useMemo(() => ([
        { id: 1, name: 'Nani', breed: 'Mixed Breed', dates: 'May 15, 2020', collection: 'Founders', mediaType: 'Photo', image: 'üêæ', message: 'The inspiration behind Paws in Peace - Forever in our hearts', owner: "Founder's Story", mintDate: '2024-08-15', tokenId: '#001', price: '0.016 ETH' },
        { id: 2, name: 'Pincher', breed: 'Doberman', dates: '2018 - 2024', collection: 'Gold', mediaType: 'Video', image: 'üêï‚Äçü¶∫', message: 'Guardian of our family, protector of hearts', owner: 'The Rodriguez Family', mintDate: '2024-08-14', tokenId: '#002', price: '0.024 ETH' },
        { id: 3, name: 'Luna', breed: 'Golden Retriever', dates: '2015 - 2024', collection: 'Silver', mediaType: 'Photo', image: 'ü¶Æ', message: 'Golden memories that shine forever bright', owner: 'The Williams Family', mintDate: '2024-08-12', tokenId: '#003', price: '0.016 ETH' },
        { id: 4, name: 'Princess', breed: 'Persian Cat', dates: '2020 - 2024', collection: 'Diamond', mediaType: 'Animation', image: 'üíé', message: 'Royal companion, precious memories crystallized', owner: 'Maria Santos', mintDate: '2024-08-10', tokenId: '#004', price: '0.032 ETH' },
        { id: 5, name: 'Buddy', breed: 'Beagle Mix', dates: '2019 - 2024', collection: 'Gemini', mediaType: 'Photo', image: '‚≠ê', message: 'Best friend, adventure companion, eternal joy', owner: 'The Davis Family', mintDate: '2024-08-08', tokenId: '#005', price: '0.016 ETH' },
        { id: 6, name: 'Max', breed: 'German Shepherd', dates: '2016 - 2024', collection: 'Founders', mediaType: 'Video', image: 'üê∫', message: 'Loyal guardian, brave heart, unforgotten hero', owner: 'Emergency Services', mintDate: '2024-08-06', tokenId: '#006', price: '0.024 ETH' },
        { id: 7, name: 'Whiskers', breed: 'Maine Coon', dates: '2017 - 2024', collection: 'Silver', mediaType: 'Photo', image: 'üê±', message: 'Gentle giant with the softest purr', owner: 'The Thompson Family', mintDate: '2024-08-04', tokenId: '#007', price: '0.016 ETH' },
        { id: 8, name: 'Charlie', breed: 'Labrador', dates: '2019 - 2024', collection: 'Gold', mediaType: 'Animation', image: 'üéæ', message: 'Ball-chasing champion, heart full of joy', owner: 'The Park Rangers', mintDate: '2024-08-02', tokenId: '#008', price: '0.032 ETH' }
      ]), []);

      const connectWallet = async () => {
        if (!window.ethereum) return alert('Please install MetaMask to connect your wallet');
        try {
          const [addr] = await window.ethereum.request({ method: 'eth_requestAccounts' });
          setAccount(addr);
          const hex = await window.ethereum.request({ method: 'eth_chainId' });
          // Basic guard for demo builds
          const detected = (hex === CHAINS[421614].hex) ? 421614 : (hex === CHAINS[42161].hex ? 42161 : 421614);
          if (DEMO_MODE && (!ALLOW_MAINNET && detected === 42161)) {
            alert('Mainnet is disabled in demo build. Switch to Arbitrum Sepolia.');
            setChainId(421614);
          } else {
            setChainId(detected);
          }
        } catch (e) {
          console.warn(e);
        }
      };

      const toggleFavorite = useCallback((id) => {
        setFavorites(prev => {
          const next = new Set(prev);
          next.has(id) ? next.delete(id) : next.add(id);
          return next;
        });
      }, []);

      // Dynamic price (demo uses static table; prod should call contract)
      useEffect(() => {
        const table = ['0.016','0.024','0.032'];
        setPriceEth(table[form.mediaType] || '0.016');
      }, [form.mediaType]);

      // Basic input validation
      const validate = () => {
        const name = form.petName.trim();
        if (!name || name.length > 32) return 'Please enter a pet name (1‚Äì32 chars).';
        if (form.mediaURI && !/^https?:\/\//i.test(form.mediaURI) && !/^ipfs:\/\//i.test(form.mediaURI)) return 'Use https:// or ipfs:// for Media URL.';
        if (form.memorialDate) {
          const d = new Date(form.memorialDate);
          if (Number.isNaN(+d)) return 'Invalid date.';
          if (d > new Date()) return 'Memorial date cannot be in the future.';
        }
        return '';
      };

      const handleMint = async () => {
        const err = validate();
        if (err) return alert(err);
        if (!account) await connectWallet();
        const petName = form.petName.trim();

        if (DEMO_MODE) {
          alert(`Memorial for ${petName} created successfully! (DEMO)\n\nThis public demo does not perform real blockchain transactions.`);
          setForm(f => ({ ...f, petName: '', mediaURI: '' }));
          return;
        }

        if (!ALLOW_MAINNET && chainId === 42161) {
          return alert('Mainnet disabled in this build. Switch to Arbitrum Sepolia.');
        }

        // === Real mint flow (ONLY in private/prod build) ===
        // const provider = new ethers.BrowserProvider(window.ethereum);
        // const signer = await provider.getSigner();
        // const contract = new ethers.Contract(ADDR[String(chainId)], CONTRACT_ABI, signer);
        // const value = await contract.getMediaPrice(form.mediaType).then(([wei]) => wei);
        // await contract.mint(form.petName, form.memorialDate || '', form.mediaType, form.mediaURI || '', { value });
        // alert('Memorial minted successfully!');
      };

      /** UI COMPONENTS **/
      const SafetyBanner = () => (
        <div className="w-full bg-black/50 text-white py-2 px-4 text-sm flex items-center gap-2">
          <Info className="w-4 h-4" aria-hidden />
          <span className="opacity-90">
            This is a <strong>public demo</strong>. Never share seed phrases. We will <strong>never DM</strong> you for money. Mainnet interactions are disabled here.
          </span>
        </div>
      );

      const Header = () => (
        <header className="glass backdrop-blur-md bg-white/10 border-b border-white/15">
          <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
            <button className="flex items-center gap-3" onClick={() => setCurrentView('home')} aria-label="Go to home">
              <div className="w-10 h-10 rounded-full bg-purple-600 grid place-items-center text-2xl">üêæ</div>
              <div className="font-bold text-xl text-white">Paws in Peace Personal Memorial</div>
            </button>
            <div className="flex items-center gap-3">
              <a href="#learn" className="px-3 py-2 rounded-lg bg-white/10 text-white border border-white/30 hover:bg-white/20">Learn</a>
              <select value={chainId} onChange={(e)=>setChainId(Number(e.target.value))} className="px-3 py-2 rounded-lg bg-white/10 text-white border border-white/30">
                <option value="421614">Arbitrum Sepolia (test)</option>
                <option value="42161" disabled={DEMO_MODE && !ALLOW_MAINNET}>Arbitrum One (main)</option>
              </select>
              <button onClick={connectWallet} className="px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white flex items-center gap-2">
                <Wallet className="w-4 h-4" aria-hidden /> {account ? `${account.slice(0,6)}‚Ä¶${account.slice(-4)}` : 'Connect Wallet'}
              </button>
            </div>
          </div>
        </header>
      );

      const MemorialToken = ({ token, onClick, compact=false }) => {
        const st = collectionStyle(token.collection);
        return (
          <div onClick={()=>onClick(token)} className={`glass rounded-xl border border-white/20 cursor-pointer transition-all hover:scale-105 hover:bg-white/15 ${compact?'p-3':'p-6'}`}>
            <div className="flex items-center justify-between mb-4">
              <div className={`${compact?'w-12 h-12':'w-16 h-16'} bg-gradient-to-br ${st.from} ${st.to} rounded-full flex items-center justify-center text-white text-2xl border border-white/30`}>{token.image}</div>
              <div className="flex items-center gap-2">
                {collectionIcon(token.collection)}
                <button aria-label="Favorite memorial" onClick={(e)=>{e.stopPropagation(); toggleFavorite(token.id);}} className={`p-2 rounded-full transition-colors ${favorites.has(token.id)?'text-pink-300':'text-white/60 hover:text-pink-300'}`}>
                  <Heart className={`w-5 h-5 ${favorites.has(token.id)?'fill-current':''}`} />
                </button>
              </div>
            </div>
            <div className={`${compact?'space-y-1':'space-y-2'}`}>
              <h3 className={`font-bold text-white ${compact?'text-lg':'text-xl'}`}>{token.name}</h3>
              <p className="text-white/80 text-sm">{token.breed}</p>
              <p className="text-white/70 text-sm font-medium">{token.dates}</p>
              <div className="flex items-center gap-2">
                <span className={`text-xs px-2 py-1 rounded-full bg-gradient-to-r ${st.from} ${st.to} text-white font-medium`}>{token.collection}</span>
                <span className="text-xs text-white/60">{token.mediaType}</span>
              </div>
              {!compact && <p className="text-white/80 text-sm italic mt-3">"{token.message}"</p>}
              {!compact && (
                <div className="flex justify-between items-center mt-4 pt-3 border-t border-white/20">
                  <span className="text-xs text-white/50">{token.tokenId}</span>
                  <span className="text-xs text-yellow-400 font-medium">{token.price}</span>
                </div>
              )}
            </div>
          </div>
        );
      };

      const HomeView = () => (
        <div className="space-y-8">
          <div className="glass rounded-2xl p-8 text-center border border-white/20 animate-float">
            <div className="flex items-center justify-center mb-4">
              <div className="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center text-2xl border border-white/30 animate-pulse-slow">üêæ</div>
            </div>
            <h1 className="text-4xl font-extrabold text-white mb-2">Every Pet Deserves a Resting Place</h1>
            <p className="text-white/85 text-lg mb-6">Mint a beautiful on-chain memorial. Photo, Video, or Animation. Powered by Arbitrum.</p>
            <div className="flex gap-3 justify-center">
              <button onClick={()=>setCurrentView('create')} className="bg-gradient-to-r from-yellow-400 to-yellow-500 text-black px-6 py-3 rounded-lg font-semibold hover:from-yellow-300 hover:to-yellow-400 transition-all flex items-center gap-2">
                <Plus className="w-5 h-5" aria-hidden />
                Create Memorial
              </button>
              <button onClick={()=>setCurrentView('gallery')} className="bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg font-semibold transition-all">Explore Gallery</button>
            </div>
            <div className="mt-6 text-sm text-white/70">Live networks: Arbitrum One & Arbitrum Sepolia</div>
          </div>

          <div className="space-y-6">
            <h2 className="text-3xl font-bold text-white">Collections</h2>
            <div className="grid md:grid-cols-3 gap-6">
              <div className="glass rounded-xl p-6 border border-yellow-400/40">
                <div className="text-yellow-300 text-sm mb-2">üèÜ Founders Collection</div>
                <h3 className="font-semibold text-white">Founders & Gold Editions</h3>
                <p className="text-white/80 mt-1">Exclusive presale holder benefits with profit sharing.</p>
              </div>
              <div className="glass rounded-xl p-6 border border-white/20">
                <div className="text-purple-200 text-sm mb-2">üíé Premium Collections</div>
                <h3 className="font-semibold text-white">Silver ‚Ä¢ Diamond ‚Ä¢ Characters</h3>
                <p className="text-white/80 mt-1">Beautiful premium memorial designs with enhanced features.</p>
              </div>
              <div className="glass rounded-xl p-6 border border-white/20">
                <div className="text-blue-200 text-sm mb-2">‚ú® Standard Collections</div>
                <h3 className="font-semibold text-white">Gemini 1‚Äì6 Series</h3>
                <p className="text-white/80 mt-1">Accessible memorial NFTs for every beloved companion.</p>
              </div>
            </div>
          </div>

          <div className="space-y-6">
            <div className="flex items-center justify-between">
              <h2 className="text-3xl font-bold text-white">Recent Memorials</h2>
              <button onClick={()=>setCurrentView('gallery')} className="text-yellow-400 font-medium flex items-center gap-1 hover:text-yellow-300">View All <ChevronRight className="w-4 h-4" aria-hidden/></button>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {memorialTokens.slice(0,4).map(t => (
                <MemorialToken key={t.id} token={t} onClick={setSelectedPet} compact />
              ))}
            </div>
          </div>

          <div className="grid grid-cols-3 gap-6">
            <div className="glass rounded-xl p-6 text-center border border-white/20">
              <div className="text-3xl font-bold text-yellow-400 mb-1">{TOKENOMICS.totalSupply.replace(/\B(?=(\d{3})+(?!\d))/g, ',').replace(',,', ',')}</div>
              <div className="text-sm text-white/80">Total $PIP Supply</div>
            </div>
            <div className="glass rounded-xl p-6 text-center border border-white/20">
              <div className="text-3xl font-bold text-purple-300 mb-1">{TOKENOMICS.presaleHardCap}</div>
              <div className="text-sm text-white/80">Presale Hard Cap</div>
            </div>
            <div className="glass rounded-xl p-6 text-center border border-white/20">
              <div className="text-3xl font-bold text-blue-300 mb-1">{TOKENOMICS.profitSharing}</div>
              <div className="text-sm text-white/80">Holder Benefit</div>
            </div>
          </div>

          {/* Learn anchor target for site section tie-in */}
          <div id="learn" className="glass rounded-xl p-6 border border-white/20">
            <h3 className="text-white font-semibold text-xl mb-2">Learn ‚Ä¢ Education Hub</h3>
            <p className="text-white/80 text-sm">Beginner-friendly guides and videos on wallets, minting, and sharing memorial NFTs on Arbitrum. (Grant deliverable)</p>
          </div>
        </div>
      );

      const GalleryView = () => (
        <div>
          <div className="flex items-center justify-between mb-6">
            <button onClick={()=>setCurrentView('home')} className="flex items-center gap-2 text-white/80 hover:text-white" aria-label="Back to home"><ArrowLeft className="w-5 h-5" aria-hidden/>Back to Home</button>
            <h2 className="text-3xl font-bold text-white">Memorial Gallery</h2>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {memorialTokens.map(t => (
              <MemorialToken key={t.id} token={t} onClick={setSelectedPet} />
            ))}
          </div>
        </div>
      );

      const CreateView = () => {
        const st = collectionStyle(form.visualStyle);
        return (
          <div>
            <div className="flex items-center justify-between mb-6">
              <button onClick={()=>setCurrentView('home')} className="flex items-center gap-2 text-white/80 hover:text-white" aria-label="Back to home"><ArrowLeft className="w-5 h-5" aria-hidden/>Back to Home</button>
              <h2 className="text-3xl font-bold text-white">Create Your Memorial</h2>
            </div>
            <div className="max-w-5xl mx-auto">
              <div className="glass rounded-2xl p-8 border border-white/20">
                <div className="space-y-6">
                  <div className="grid md:grid-cols-2 gap-4">
                    <label className="block" htmlFor="petname">
                      <span className="block text-sm mb-2 text-white">Pet Name *</span>
                      <input id="petname" value={form.petName} onChange={(e)=>setForm(f=>({...f,petName:e.target.value}))} className="w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/60 border border-white/30 focus:border-yellow-400 focus:outline-none" placeholder="Enter your pet's name" />
                    </label>
                    <label className="block" htmlFor="memdate">
                      <span className="block text-sm mb-2 text-white">Memorial Date</span>
                      <input id="memdate" type="date" value={form.memorialDate} onChange={(e)=>setForm(f=>({...f,memorialDate:e.target.value}))} className="w-full p-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-yellow-400 focus:outline-none" />
                    </label>
                  </div>

                  <label className="block" htmlFor="message">
                    <span className="block text-sm mb-2 text-white">Memorial Message</span>
                    <textarea id="message" value={form.message} onChange={(e)=>setForm(f=>({...f,message:e.target.value}))} className="w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/60 border border-white/30 focus:border-yellow-400 focus:outline-none h-24" placeholder="Share a loving memory or tribute..." />
                  </label>

                  <div className="grid md:grid-cols-3 gap-4">
                    <label className="block" htmlFor="mediatype">
                      <span className="block text-sm mb-2 text-white">Media Type</span>
                      <select id="mediatype" value={form.mediaType} onChange={(e)=>setForm(f=>({...f,mediaType:Number(e.target.value)}))} className="w-full p-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-yellow-400 focus:outline-none">
                        <option value={0}>Photo (0.016 ETH)</option>
                        <option value={1}>Video (0.024 ETH)</option>
                        <option value={2}>Animation (0.032 ETH)</option>
                      </select>
                    </label>

                    <label className="block" htmlFor="mediauri">
                      <span className="block text-sm mb-2 text-white">Media URL (Optional)</span>
                      <input id="mediauri" value={form.mediaURI} onChange={(e)=>setForm(f=>({...f,mediaURI:e.target.value}))} className="w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/60 border border-white/30 focus:border-yellow-400 focus:outline-none" placeholder="https://... or ipfs://..." />
                      <div className="text-xs text-white/60 mt-1">Leave empty to upload later</div>
                    </label>

                    <label className="block" htmlFor="style">
                      <span className="block text-sm mb-2 text-white">Collection Style</span>
                      <select id="style" value={form.visualStyle} onChange={(e)=>setForm(f=>({...f,visualStyle:e.target.value}))} className="w-full p-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-yellow-400 focus:outline-none">
                        {['Founders','Gold','Silver','Diamond','Gemini'].map(v => <option key={v} value={v}>{v}</option>)}
                      </select>
                    </label>
                  </div>

                  <div className="bg-white/5 rounded-lg p-4 border border-white/10">
                    <div className="text-sm text-white/90 mb-1"><strong>Demo Mode:</strong> This is a preview of the Paws in Peace memorial platform.</div>
                    <div className="text-xs text-white/70">Current tokenomics: launch {TOKENOMICS.launchPrice} ‚Ä¢ presale cap {TOKENOMICS.presaleHardCap} ‚Ä¢ physical centers + holder profit share.</div>
                  </div>

                  <div className="flex items-center justify-between mt-8 pt-6 border-t border-white/20">
                    <div className="text-sm text-white/80">Network: {CHAINS[chainId].label} ‚Ä¢ Price: {priceEth} ETH</div>
                    <button type="button" onClick={handleMint} className={`px-6 py-3 rounded-lg bg-gradient-to-r ${collectionStyle(form.visualStyle).from} ${collectionStyle(form.visualStyle).to} text-black font-semibold hover:opacity-90 transition-all`}>
                      {account ? 'Create Memorial' : 'Connect & Create'}
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const PetDetailView = () => {
        if (!selectedPet) return null;
        const st = collectionStyle(selectedPet.collection);
        return (
          <div>
            <div className="flex items-center justify-between mb-6">
              <button onClick={()=>setSelectedPet(null)} className="flex items-center gap-2 text-white/80 hover:text-white" aria-label="Back to gallery"><ArrowLeft className="w-5 h-5" aria-hidden/>Back to Gallery</button>
              <div className="flex gap-2">
                <button aria-label="Share memorial" className="p-2 bg-white/10 rounded-lg text-blue-300 hover:bg-white/20 border border-white/30"><Share2 className="w-5 h-5" aria-hidden/></button>
                <button aria-label="Favorite memorial" onClick={()=>toggleFavorite(selectedPet.id)} className={`p-2 rounded-lg border border-white/30 ${favorites.has(selectedPet.id)?'bg-pink-500/20 text-pink-300':'bg-white/10 text-white/60 hover:bg-pink-500/20 hover:text-pink-300'}`}>
                  <Heart className={`w-5 h-5 ${favorites.has(selectedPet.id)?'fill-current':''}`} aria-hidden/>
                </button>
              </div>
            </div>

            <div className="max-w-2xl mx-auto">
              <div className="glass rounded-2xl border border-white/20 overflow-hidden">
                <div className="bg-gradient-to-br from-white/20 to-white/10 p-12 text-center">
                  <div className={`w-32 h-32 bg-gradient-to-br ${st.from} ${st.to} rounded-full flex items-center justify-center text-white text-6xl mx-auto mb-6 border border-white/30 animate-pulse-slow`}>{selectedPet.image}</div>
                  <div className="flex items-center justify-center gap-3 mb-4">
                    <h1 className="text-4xl font-bold text-white">{selectedPet.name}</h1>
                    {collectionIcon(selectedPet.collection)}
                  </div>
                  <p className="text-xl text-white/80 mb-2">{selectedPet.breed}</p>
                  <p className="text-lg text-white/70 font-medium">{selectedPet.dates}</p>
                  <div className={`inline-block px-4 py-2 rounded-full bg-gradient-to-r ${st.from} ${st.to} text-white font-medium mt-4`}>{selectedPet.collection}</div>
                </div>
                <div className="p-8 space-y-6">
                  <div className="text-center"><p className="text-white/90 text-lg italic leading-relaxed">"{selectedPet.message}"</p></div>
                  <div className="border-t border-white/20 pt-6">
                    <div className="grid grid-cols-2 gap-6 text-center">
                      <div>
                        <p className="text-sm text-white/60 mb-1">Token ID</p>
                        <p className="font-medium text-white">{selectedPet.tokenId}</p>
                      </div>
                      <div>
                        <p className="text-sm text-white/60 mb-1">Mint Price</p>
                        <p className="font-medium text-yellow-400">{selectedPet.price}</p>
                      </div>
                    </div>
                  </div>
                  <div className="border-t border-white/20 pt-6">
                    <div className="grid grid-cols-2 gap-6 text-center">
                      <div>
                        <p className="text-sm text-white/60 mb-1">Media Type</p>
                        <p className="font-medium text-white">{selectedPet.mediaType}</p>
                      </div>
                      <div>
                        <p className="text-sm text-white/60 mb-1">Minted</p>
                        <p className="font-medium text-white">{selectedPet.mintDate}</p>
                      </div>
                    </div>
                  </div>
                  <div className="border-t border-white/20 pt-6 text-center">
                    <p className="text-sm text-white/60 mb-1">Created by</p>
                    <p className="font-medium text-white">{selectedPet.owner}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      };

      // Render
      const AppShell = () => (
        <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900">
          <SafetyBanner />
          <Header />
          <main className="max-w-7xl mx-auto px-4 py-8">
            {selectedPet ? <PetDetailView /> : (
              currentView === 'gallery' ? <GalleryView /> :
              currentView === 'create' ? <CreateView /> :
              <HomeView />
            )}
          </main>
        </div>
      );

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<AppShell />);
    </script>
</body>
</html>
