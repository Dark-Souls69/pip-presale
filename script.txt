document.addEventListener('DOMContentLoaded', () => {
    // --- Paw Print Background Animation ---
    const backgroundAnimation = document.querySelector('.background-animation');
    const pawPrintImage = 'images/paw.png'; // Make sure you have a paw.png in an 'images' folder

    function createPawPrint() {
        const paw = document.createElement('div');
        paw.classList.add('paw-print');
        paw.style.backgroundImage = `url(${pawPrintImage})`;

        const startX = Math.random() * window.innerWidth;
        const startY = -100; // Start higher off-screen
        paw.style.left = `${startX}px`;
        paw.style.top = `${startY}px`;

        const size = Math.random() * (120 - 40) + 40; // Between 40px and 120px
        paw.style.width = `${size}px`;
        paw.style.height = `${size}px`;

        // Generate random end positions and rotations
        const endX = Math.random() * window.innerWidth * 1.8 - (window.innerWidth * 0.4);
        const endY = window.innerHeight * 1.5;
        const rotateEnd = (Math.random() > 0.5 ? 1 : -1) * (360 * (Math.random() * 3 + 1)); // Random spins

        // Set CSS variables for animation keyframes
        paw.style.setProperty('--x-end', `${endX - startX}px`);
        paw.style.setProperty('--y-end', `${endY - startY}px`);
        paw.style.setProperty('--rotate-end', `${rotateEnd}deg`);

        // Randomize animation duration and delay
        const duration = Math.random() * (25 - 15) + 15; // Longer duration for slower, more majestic float
        const delay = Math.random() * 8; // Stagger initial appearance more
        paw.style.animationDuration = `${duration}s`;
        paw.style.animationDelay = `${delay}s`;

        backgroundAnimation.appendChild(paw);

        // Remove paw print after animation ends to prevent accumulation
        paw.addEventListener('animationend', () => {
            paw.remove();
        });
    }

    // Create a continuous stream of paw prints
    setInterval(createPawPrint, 1500);


    // --- Contract Address Copy to Clipboard ---
    const copyButton = document.querySelector('.copy-address-btn');
    if (copyButton) {
        copyButton.addEventListener('click', async () => {
            const addressToCopy = copyButton.dataset.address;
            try {
                await navigator.clipboard.writeText(addressToCopy);
                copyButton.textContent = 'Copied!';
                setTimeout(() => {
                    copyButton.innerHTML = '<i class="far fa-copy"></i> Copy';
                }, 2000); // Reset button text after 2 seconds
            } catch (err) {
                console.error('Failed to copy address: ', err);
                // Fallback for older browsers or non-HTTPS contexts (less common now)
                const textArea = document.createElement('textarea');
                textArea.value = addressToCopy;
                textArea.style.position = 'fixed'; // Avoid scrolling to bottom
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    copyButton.textContent = 'Copied!';
                    setTimeout(() => {
                        copyButton.innerHTML = '<i class="far fa-copy"></i> Copy';
                    }, 2000);
                } catch (err) {
                    console.error('Fallback: Failed to copy address: ', err);
                }
                document.body.removeChild(textArea);
            }
        });
    }
});